// Define the datasource block
datasource db {
  provider = "postgresql" 
  url      = env("DATABASE_URL") 
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id                   String             @id @default(cuid())
  balance              Int                @default(1000)
  bank                 Int                @default(0)
  wallet               Int                @default(0)
  wantsNotifications   Boolean            @default(false)
  totalWon             Int                @default(0)
  totalLost            Int                @default(0)
  lastSalaryClaim      DateTime?          @db.Timestamp // Track the date of the last salary claim
  lastEarningStart     DateTime?          @db.Timestamp // Track when the current earning period started
  hoursEarned          Int                @default(0) // Track hours earned in current period
  lastClaimDate        DateTime?          @db.Timestamp
  claimsMade           Int                @default(0)   // Track the total number of claims made
  role                 String             @default("Member")
  tickets              LotteryTicket[] 
}

model Lottery {
  id          String    @id @default(cuid())
  prize       Int
  ticketPrice Int
  endTime     DateTime  @db.Timestamp // End time of the lottery
  winner      String?
  active      Boolean   @default(true)
  tickets     LotteryTicket[] // Associated tickets for the lottery
}

model LotteryTicket {
  id        String   @id @default(cuid())
  lotteryId String
  userId    String
  lottery   Lottery  @relation(fields: [lotteryId], references: [id])
  user      User     @relation(fields: [userId], references: [id])
}